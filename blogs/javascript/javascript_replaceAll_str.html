<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.59" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://clearlove443.github.io.v2/v2/blogs/javascript/javascript_replaceAll_str.html"><meta property="og:site_name" content="clearlove's blog"><meta property="og:title" content="3 Ways To Replace All String Occurrences in JavaScript"><meta property="og:description" content="There‚Äôs no easy way to replace all string occurrences in JavaScript. Java, which had served an inspiration for JavaScript in the first days, has the replaceAll() method on strin..."><meta property="og:type" content="article"><meta property="og:updated_time" content="2023-05-21T04:38:09.000Z"><meta property="og:locale" content="en-US"><meta property="article:tag" content="JavaScript"><meta property="article:published_time" content="2021-10-18T21:37:29.000Z"><meta property="article:modified_time" content="2023-05-21T04:38:09.000Z"><title>3 Ways To Replace All String Occurrences in JavaScript | clearlove's blog</title><meta name="description" content="There‚Äôs no easy way to replace all string occurrences in JavaScript. Java, which had served an inspiration for JavaScript in the first days, has the replaceAll() method on strin...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/v2/assets/style-bc5ef258.css" as="style"><link rel="stylesheet" href="/v2/assets/style-bc5ef258.css">
    <link rel="modulepreload" href="/v2/assets/app-e448025b.js"><link rel="modulepreload" href="/v2/assets/framework-80bf61a6.js"><link rel="modulepreload" href="/v2/assets/javascript_replaceAll_str.html-55d04f2c.js"><link rel="modulepreload" href="/v2/assets/javascript_replaceAll_str.html-41aa1942.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/v2/" class="brand"><img class="logo" src="/v2/profile.png" alt="clearlove&#39;s blog"><!----><span class="site-name hide-in-pad">clearlove&#39;s blog</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/v2/" class="nav-link" aria-label="Home"><span class="icon iconfont icon-home"></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/v2/zh/demo/" class="nav-link" aria-label="Demo"><span class="icon iconfont icon-discover"></span>Demo<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="V2 Docs" class="nav-link"><span class="icon iconfont icon-note"></span>V2 Docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div class="search-pro-button" role="search" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></div><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->3 Ways To Replace All String Occurrences in JavaScript</h1><div class="page-info"><span class="author-info" aria-label="Authorüñä" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="author-item">Clear Love</span></span><span property="author" content="Clear Love"></span></span><!----><span class="date-info" aria-label="Writing DateüìÖ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2021-10-18T21:37:29.000Z"></span><span class="category-info" aria-label="Categoryüåà" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="category-item category2 clickable" role="navigation">front-end-js</span><meta property="articleSection" content="front-end-js"></span><span class="tag-info" aria-label="Tagüè∑" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="tag-item tag-item5 clickable" role="navigation">JavaScript</span><meta property="keywords" content="JavaScript"></span><span class="reading-time-info" aria-label="Reading Time‚åõ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 3 min</span><meta property="timeRequired" content="PT3M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/v2/blogs/javascript/javascript_replaceAll_str.html#regular-expression-from-a-string" class="router-link-active router-link-exact-active toc-link level2">Regular expression from a string</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/v2/blogs/javascript/javascript_replaceAll_str.html#replace-with-a-string" class="router-link-active router-link-exact-active toc-link level2">replace() with a string</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/v2/blogs/javascript/javascript_replaceAll_str.html#the-difference-between-replaceall-and-replace" class="router-link-active router-link-exact-active toc-link level2">The difference between replaceAll() and replace()</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><p>There‚Äôs no easy way to replace all string occurrences in JavaScript. Java, which had served an inspiration for JavaScript in the first days, has the replaceAll() method on strings since 1995!</p><p>In this post, you‚Äôll learn how to replace all string occurrences in JavaScript by splitting and joining a string, and string.replace() combined with a global regular expression.</p><p>Moreover, you‚Äôll read about the new proposal string.replaceAll() (at stage 4) that brings the replace all method to JavaScript strings. This is the most convenient approach.</p><h1 id="splitting-and-joining-an-array" tabindex="-1"><a class="header-anchor" href="#splitting-and-joining-an-array" aria-hidden="true">#</a> Splitting and joining an array</h1><p>If you google how to ‚Äúreplace all string occurrences in JavaScript‚Äù, most likely the first approach you‚Äôd find is to use an intermediate array.</p><p>Here‚Äôs how it works:</p><ul><li>Split the string into pieces by the search string:</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> pieces <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>Then join the pieces putting the replace string in between:</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> resultingString <span class="token operator">=</span> pieces<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>replace<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>For example, let‚Äôs replace all spaces &#39; &#39; with hyphens &#39;-&#39; in &#39;duck duck go&#39; string:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> search <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> replaceWith <span class="token operator">=</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">&quot;duck duck go&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>replaceWith<span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;duck-duck-go&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&#39;duck duck go&#39;.split(&#39; &#39;)</code> splits the string into pieces: [&#39;duck&#39;, &#39;duck&#39;, &#39;go&#39;]. Then the pieces <code>[&#39;duck&#39;, &#39;duck&#39;, &#39;go&#39;].join(&#39;-&#39;)</code> are joined by inserting &#39;-&#39; in between them, which results in the string <code>&#39;duck-duck-go&#39;</code>.</p><p>Here‚Äôs a generalized helper function that uses splitting and joining approach:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token parameter">string<span class="token punctuation">,</span> search<span class="token punctuation">,</span> replace</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>replace<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;abba&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;ibbi&#39;</span>
<span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;go go go!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;go&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;move move move!&#39;</span>
<span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;oops&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;z&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;oops&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This approach requires transforming the string into an array, and then back into a string. Let‚Äôs continue looking for better alternatives.</p><h1 id="replace-with-a-global-regular-expression" tabindex="-1"><a class="header-anchor" href="#replace-with-a-global-regular-expression" aria-hidden="true">#</a> replace() with a global regular expression</h1><p>The string method string.replace(regExpSearch, replaceWith) searches and replaces the occurrences of the regular expression regExpSearch with replaceWith string.</p><p>To make the method replace() replace all occurrences of the pattern you have to enable the global flag on the regular expression:</p><ul><li>Append g after at the end of regular expression literal: ¬∑<code>/search/g</code></li><li>Or when using a regular expression constructor, add &#39;g&#39; to the second argument: <code>new RegExp(&#39;search&#39;, &#39;g&#39;)</code> Let‚Äôs replace all occurrences of &#39; &#39; with &#39;-&#39;:</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> searchRegExp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> replaceWith <span class="token operator">=</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">&quot;duck duck go&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>searchRegExp<span class="token punctuation">,</span> replaceWith<span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;duck-duck-go&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The regular expression literal <code>/\s/g</code> (note the g global flag) matches the space &#39; &#39;.</p><p><code>&#39;duck duck go&#39;.replace(/\s/g, &#39;-&#39;)</code> replaces all matches of <code>/\s/g</code> with <code>&#39;-&#39;</code>, which results in <code>&#39;duck-duck-go&#39;</code>.</p><p>You can easily make case insensitive replaces by adding i flag to the regular expression:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> searchRegExp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">duck</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> replaceWith <span class="token operator">=</span> <span class="token string">&quot;goose&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">&quot;DUCK Duck go&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>searchRegExp<span class="token punctuation">,</span> replaceWith<span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;goose goose go&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The regular expression /duck/gi performs a global case-insensitive search (note i and g flags). <code>/duck/gi</code> matches &#39;DUCK&#39;, as well as &#39;Duck&#39;.</p><p>Invoking <code>&#39;DUCK Duck go&#39;.replace(/duck/gi, &#39;goose&#39;)</code> replaces all matches of <code>/duck/gi</code> substrings with <code>&#39;goose&#39;</code>.</p><h2 id="regular-expression-from-a-string" tabindex="-1"><a class="header-anchor" href="#regular-expression-from-a-string" aria-hidden="true">#</a> Regular expression from a string</h2><p>When the regular expression is created from a string, you have to escape the characters <code>- [ ] / { } ( ) * + ? . \ ^ $ |</code> because they have special meaning within the regular expression.</p><p>Because of that, the special characters are a problem when you‚Äôd like to make replace all operation. Here‚Äôs an example:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> search <span class="token operator">=</span> <span class="token string">&quot;+&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> searchRegExp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>search<span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Throws SyntaxError</span>
<span class="token keyword">const</span> replaceWith <span class="token operator">=</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">&quot;5+2+1&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>searchRegExp<span class="token punctuation">,</span> replaceWith<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The above snippet tries to transform the search string <code>&#39;+&#39;</code> into a regular expression. But <code>&#39;+&#39;</code> is an invalid regular expression, thus SyntaxError: Invalid regular expression: <code>/+/</code>is thrown.</p><p>Escaping the character <code>&#39;\\+&#39;</code> solves the problem.</p><p>Nevertheless, does it worth escaping the search string using a function like escapeRegExp() to be used as a regular expression? Most likely not.</p><h2 id="replace-with-a-string" tabindex="-1"><a class="header-anchor" href="#replace-with-a-string" aria-hidden="true">#</a> replace() with a string</h2><p>If the first argument search of string.replace(search, replaceWith) is a string, then the method replaces only the first occurrence of search:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> search <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> replace <span class="token operator">=</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">&quot;duck duck go&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>search<span class="token punctuation">,</span> replace<span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;duck-duck go&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&#39;duck duck go&#39;.replace(&#39; &#39;, &#39;-&#39;)</code> replaces only the first appearance of a space.</p><h1 id="replaceall-method" tabindex="-1"><a class="header-anchor" href="#replaceall-method" aria-hidden="true">#</a> replaceAll() method</h1><p>Finally, the method string.replaceAll(search, replaceWith) replaces all appearances of search string with replaceWith.</p><p>Let‚Äôs replace all occurrences of &#39; &#39; with &#39;-&#39;:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> search <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> replaceWith <span class="token operator">=</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token string">&quot;duck duck go&quot;</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>search<span class="token punctuation">,</span> replaceWith<span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">;</span> <span class="token comment">// =&gt; &#39;duck-duck-go&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&#39;duck duck go&#39;.replaceAll(&#39; &#39;, &#39;-&#39;)</code> replaces all occurrences of &#39; &#39; string with &#39;-&#39;.</p><p>string.replaceAll(search, replaceWith) is the best way to replace all string occurrences in a string</p><p>Note that currently, the method support in browsers is limited, and you might require a polyfill.</p><h2 id="the-difference-between-replaceall-and-replace" tabindex="-1"><a class="header-anchor" href="#the-difference-between-replaceall-and-replace" aria-hidden="true">#</a> The difference between replaceAll() and replace()</h2><p>The string methods replaceAll(search, replaceWith) and replace(search, replaceWith) work the same way, expect 2 things:</p><p>If search argument is a string, replaceAll() replaces all occurrences of search with replaceWith, while replace() only the first occurence If search argument is a non-global regular expression, then replaceAll() throws a TypeError exception.</p><h1 id="key-takeaway" tabindex="-1"><a class="header-anchor" href="#key-takeaway" aria-hidden="true">#</a> Key takeaway</h1><p>The primitive approach to replace all occurrences is to split the string into chunks by the search string, the join back the string placing the replace string between chunks: <code>string.split(search).join(replaceWith)</code>. This approach works, but it‚Äôs hacky.</p><p>Another approach is to use string.replace(/SEARCH/g, replaceWith) with a regular expression having the global flag enabled.</p><p>Unfortunately, you cannot easily generate regular expressions from a string at runtime, because the special characters of regular expressions have to be escaped. And dealing with a regular expression for a simple replacement of strings is overwhelming.</p><p>Finally, the new string method string.replaceAll(search, replaceWith) replaces all string occurrences. The method is a proposal at stage 4, and hopefully, it will land in a new JavaScript standard pretty soon.</p><p>My recommendation is to use string.replaceAll() to replace strings.</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/blogs/javascript/javascript_replaceAll_str.md" rel="noopener noreferrer" target="_blank" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]--><!----><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">Last update: </span><!----></div><div class="meta-item contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 1127280933@qq.com">ClearLove443</span><!--]--><!--]--></div></footer><!----><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/v2/assets/app-e448025b.js" defer></script>
  </body>
</html>
