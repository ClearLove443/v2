import{_ as i,D as o,V as r,W as l,Y as s,Z as a,$ as t,a0 as p}from"./framework-7c77a285.js";const m={},c={href:"https://maven.aliyun.com/mvn/view",target:"_blank",rel:"noopener noreferrer"},u={href:"https://mirrors.cloud.tencent.com/",target:"_blank",rel:"noopener noreferrer"},d={href:"https://mirrors.huaweicloud.com/",target:"_blank",rel:"noopener noreferrer"},v={href:"http://mvn-tencent.sh",target:"_blank",rel:"noopener noreferrer"};function k(g,n){const e=o("ExternalLinkIcon");return r(),l("div",null,[n[9]||(n[9]=s("p",null,"Maven 是当前流行的项目管理工具，但官方的库在国内经常连不上，连上以后龟一般的速度也能让你崩溃，这时候也许你会去搜索下如何加速。 百度搜索 maven 镜像 会发现绝大部分都在推荐 阿里云 的镜像服务，但是阿里云的镜像服务真的好用吗？去国内各大云厂商搜索了下发现都提供了镜像服务，到底哪个是最快的呢？这里进行深度测试。各大厂商也是鸡贼，对关键字也做了处理比如腾讯的 腾讯云镜像 maven 腾讯云 maven 镜像",-1)),n[10]||(n[10]=s("p",null,"镜像地址",-1)),s("ul",null,[s("li",null,[n[1]||(n[1]=a("阿里云 ")),s("a",c,[n[0]||(n[0]=a("https://maven.aliyun.com/mvn/view")),t(e)])]),s("li",null,[n[3]||(n[3]=a("腾讯云 ")),s("a",u,[n[2]||(n[2]=a("https://mirrors.cloud.tencent.com/")),t(e)])]),s("li",null,[n[5]||(n[5]=a("华为云 ")),s("a",d,[n[4]||(n[4]=a("https://mirrors.huaweicloud.com/")),t(e)])])]),n[11]||(n[11]=p(`<p>下载速度 配置文件准备 示例程序使用之前多数据源配置的程序样例，文末有下载方式</p><p>我们使用华为云 maven 镜像加速下载下来的配置文件为模板，复制三份，mirror 分别指定为华为云、阿里云、腾讯云的地址，文件命名为 settings_ali.xml settings_huawei.xml settings_tencent.xml</p><p>maven 本地缓存路径使用默认的地址 \${user.home}/.m2/repository ,每次构建之前需要清理本地缓存文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /root/.m2/repository/*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>我们使用 maven 命令行窗口指定特定 settings.xml 的方式进行测试 maven 命令如下</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mvn clean package <span class="token parameter variable">-Dmaven.test.skip</span><span class="token operator">=</span>true <span class="token parameter variable">-s</span> settings_ali.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>完整的脚本 这里以华为云为例，脚本执行 100 次</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;&#39;</span> <span class="token operator">&gt;</span> huawei
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /root/.m2/repository/*
    <span class="token comment"># start_mill=$((\`date &#39;+%s&#39;\`*1000+\`date &#39;+%N&#39;\`/1000000))</span>
    mvn clean package <span class="token parameter variable">-Dmaven.test.skip</span><span class="token operator">=</span>true <span class="token parameter variable">-s</span> settings_huawei.xml <span class="token operator">&gt;&gt;</span> huawei
    <span class="token comment"># end_mill=$((\`date &#39;+%s&#39;\`*1000+\`date &#39;+%N&#39;\`/1000000))</span>
    <span class="token comment"># diff=$[10#$end_mill-10#$start_mill]</span>
    <span class="token comment">#echo $diff &gt;&gt; huawei</span>
<span class="token keyword">done</span>
<span class="token function">grep</span> <span class="token string">&#39;Total time&#39;</span> huawei <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&#39;BEGIN {max = 0} {if ($4&gt;max) max=$4 fi} END {print &quot;Max=&quot;, max}&#39;</span>
<span class="token function">grep</span> <span class="token string">&#39;Total time&#39;</span> huawei <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&#39;BEGIN {min = 6553565} {if ($4&lt;min) min=$4 fi} END {print &quot;Min=&quot;, min}&#39;</span>
<span class="token function">grep</span> <span class="token string">&#39;Total time&#39;</span> huawei <span class="token operator">|</span><span class="token function">awk</span> <span class="token string">&#39;{sum+=$4}END{print &quot;Average = &quot;, sum/NR}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用到了 awk 进行统计</p><p>结论 用户体验： 华为云&gt;腾讯云&gt;阿里云 下载速度： 华为云&gt;阿里云&gt;腾讯云</p><p>用户体验无所谓了一次性配置，我们肯定首选下载速度最快的华为云了。</p>`,11)),s("p",null,[n[7]||(n[7]=a("小技巧：使用 nohup 让脚本后台运行，nohup sh ")),s("a",v,[n[6]||(n[6]=a("mvn-tencent.sh")),t(e)]),n[8]||(n[8]=a(" &"))])])}const f=i(m,[["render",k],["__file","maven_setting_mirroring.html.vue"]]);export{f as default};
